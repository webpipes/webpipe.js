(function(){var e=this,f={},c=function(a){return new g(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=c,e.XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest),exports.webpipe=c):e.webpipe=c;c.VERSION="0.2.0";c.REGISTRY="http://registry.webpipes.org/";c.DISPATCH="http://dispatch.webpipes.org/";c.manual=function(a,b){f.ajax({url:c.REGISTRY+"webpipes/"+a,method:"GET",callback:b})};c.request=function(a,b,d){f.ajax({url:c.DISPATCH+a,method:"POST",
data:b,callback:d})};f.ajax=function(a){var b,d="";if(typeof a!=="object"||(!a.hasOwnProperty("url")||!a.hasOwnProperty("method")||!a.hasOwnProperty("callback"))||typeof a.callback!=="function")return false;if(a.data&&Object.keys(a.data).length){for(key in a.data)d=d+(key+"="+a.data[key]+"&");d=d.slice(0,d.length-1)}if(e.XMLHttpRequest)b=new e.XMLHttpRequest;else if(e.ActiveXObject)b=new ActiveXObject("Microsoft.XMLHTTP");else{a.callback("Environment does not support XMLHttpRequest",{});return}b.onreadystatechange=
function(){this.readyState===4&&(this.status===200?a.callback(false,this.responseText):a.callback(true,this.responseText))};b.open(a.method,a.url,true);b.setRequestHeader("X-Requested-With","Webpipe.js/"+c.VERSION);a.method==="POST"&&b.setRequestHeader("Content-Type","application/x-www-form-urlencoded");d.length?b.send(d):e.XMLHttpRequest?b.send(null):b.send()};var g=function(a){this._wrapped=a};c.prototype=g.prototype;var webpipe=c}).call(this);